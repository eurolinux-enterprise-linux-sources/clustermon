From d5ac2384d88206f9d035d998d04f13653fedec5a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jan=20Pokorn=C3=BD?= <jpokorny@redhat.com>
Date: Fri, 12 Oct 2012 19:47:58 +0200
Subject: [PATCH] cluster-cim: missing symbols/provider library not compiled
 properly
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Resolves: rhbz#865588

Signed-off-by: Jan Pokorn√Ω <jpokorny@redhat.com>
---
 ricci/modules/cluster/clumon/src/cim-provider/Makefile | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/ricci/modules/cluster/clumon/src/cim-provider/Makefile b/ricci/modules/cluster/clumon/src/cim-provider/Makefile
index db672b3..d37d466 100644
--- a/ricci/modules/cluster/clumon/src/cim-provider/Makefile
+++ b/ricci/modules/cluster/clumon/src/cim-provider/Makefile
@@ -69,7 +69,7 @@ endif
 
 INCLUDE += -I ../include
 CXXFLAGS += $(PEGASUS_CXXFLAGS) -DPARANOIA=$(PARANOID)
-LDFLAGS += -shared -ldl -lcrypt -lcman
+LDFLAGS += -shared -ldl -lcrypt -lcman -lrt
 
 ifeq ($(PARANOID), 1)
 	LDFLAGS += ${top_srcdir}/common/paranoid/*.o
@@ -77,6 +77,8 @@ else
 	LDFLAGS += ${top_srcdir}/common/*.o
 endif
 
+LDFLAGS += ../common/{Cluster,ClusterMonitor,Node,Service}.o
+
 OBJECTS = ClusterProviderMain.o ClusterProvider.o
 
 TARGET = libRedHatClusterProvider.so
-- 
1.7.11.4

